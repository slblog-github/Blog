window.setCustom=()=>{},(async()=>{function e(e,o){return parseInt(Math.random()*(o-e+1)+e,10)}window.mCh={init:()=>{window.messageChannel=new MessageChannel,navigator.serviceWorker.controller.postMessage({type:"INIT"},[messageChannel.port2])},send:e=>new Promise(((o,t)=>{const r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)}));navigator.serviceWorker.controller.postMessage({type:"DATA",data:e,id:r}),setTimeout((()=>{t({message:"timeout",ok:!1})}),2e3),messageChannel.port1.onmessage=e=>{e.data.id===r&&o({data:e.data.data,ok:!0})}}))},"serviceWorker"in navigator?(Number(window.localStorage.getItem("WooBlogHelper_Set"))<1&&(console.log("检测到您的浏览器没有安装WooBlogHelper，开始注册"),window.stop(),window.localStorage.setItem("WooBlogHelper_Set",1),document.write("稍安勿躁,我们正在安装WooBlogHelper插件,这大概需要几百毫秒...")),navigator.serviceWorker.register(`/sw.js?time=${e(1,8888888888888889e4)}`).then((async()=>{Number(window.localStorage.getItem("WooBlogHelper_Set"))<2&&(console.log("WooBlogHelper安装是成功的！\n将在一秒后尝试激活！"),setTimeout((()=>{window.localStorage.setItem("WooBlogHelper_Set",2),window.location.search=`?time=${e(1,8888888888888889e4)}`}),100)),2==Number(window.localStorage.getItem("WooBlogHelper_Set"))&&(await Promise.all([fetch("/offline/"),fetch("https://npm.elemecdn.com/chenyfan-os@0.0.0-r6")]),window.localStorage.setItem("WooBlogHelper_Set",3))})).catch((e=>console.error(`WooBlogHelperError:${e}`)))):console.error("Oops, your browser doesn't support ServiceWorker!")})();